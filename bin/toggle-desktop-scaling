#!/bin/bash

if [[ ! -x "$(which gsettings)" ]]; then
  exit
fi

normal_scale=1.0
fourk_scale=1.5
current_scale=$(gsettings get org.gnome.desktop.interface text-scaling-factor)

if [[ "$1" = "echo" ]]; then
  echo $current_scale
  exit
fi

if [ "$1" ]; then
  scale_to_set=$1
elif [[ "$current_scale" == "$fourk_scale" ]]; then
  echo "Changing to normal scale..."
  gsettings set org.gnome.desktop.interface font-name 'Ubuntu 12'
  gsettings set org.gnome.desktop.interface document-font-name 'Sans 12'
  gsettings set org.gnome.desktop.wm.preferences titlebar-font 'Ubuntu Bold 12'
  gsettings set org.gnome.desktop.interface monospace-font-name 'DejaVu Sans Mono 12'

  scale_to_set=$normal_scale
else
  echo "Changing to 4k scale..."
  gsettings set org.gnome.desktop.interface font-name 'Ubuntu 10'
  gsettings set org.gnome.desktop.interface document-font-name 'Sans 10'
  gsettings set org.gnome.desktop.wm.preferences titlebar-font 'Ubuntu Bold 10'
  gsettings set org.gnome.desktop.interface monospace-font-name 'DejaVu Sans Mono 11'

  scale_to_set=$fourk_scale
fi

gsettings set org.gnome.desktop.interface text-scaling-factor $scale_to_set
